func candy(ratings []int) int {
    n := len(ratings)
    candy := 0
    candies := make([]int, n)

    for i := n-1;i>=0;i--{
        if i < n-1 {
            if ratings[i] > ratings[i+1] {//checking the next right side neighbour
                candies[i] = candies[i+1]+1
            }else{
                candies[i] = 1
                j := i+1
                //checking all the right hand side are balance as per rule
                for j<n && ratings[j-1] < ratings[j] && !(candies[j-1] < candies[j]){
                    candies[j] = candies[j-1]+1
                    candy++
                    j++
                }
            }
        }else{
            candies[i] = 1
        }

        candy += candies[i]
    }
    return candy
}
